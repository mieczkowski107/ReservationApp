@model Report

<script>
    window.onload = function () {
        const today = new Date().toISOString().split("T")[0];
        document.getElementById("startDate").max = today;
        document.getElementById("endDate").max = today;
    };
</script>

<div class="card">
    <div class="card-header">
        <h3>Generate Report</h3>
        <form method="post">
            <div class="container">
                <div class="row mt-3 justify-content-between">
                    <div class="col-4 form-floating">
                        <input asp-for="@Model.StartRangeDate" class="form-control" type="date" id="startDate" />
                        <label asp-for="@Model.StartRangeDate" class="form-label"></label>
                        <span asp-validation-for="StartRangeDate" class="text-danger"></span>
                    </div>
                    <div class="col-4 form-floating">
                        <input asp-for="@Model.EndRangeDate" class="form-control" type="date" id="endDate" />
                        <label asp-for="@Model.EndRangeDate" class="form-label"></label>
                        <span asp-validation-for="EndRangeDate" class="text-danger"></span>
                    </div>
                    <div class="col-4 d-flex align-items-end">
                        <button type="submit" class="btn btn-outline-primary w-100">Check</button>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <div class="card-body">
            <table class="table-responsive table-striped table-bordered text-center justify-content-center shadow">
                <thead class="">
                    <tr>
                        <th class="table-info">
                            Start Date
                        </th>
                        <th class="table-info">
                            End Date
                        </th>
                        <th class="table-info">
                            Income
                        </th>
                        <th class="table-info">
                            Total appointments
                        </th>
                        <th class="table-info px-0">
                            Deleted appointments
                        </th>
                        <th class="table-info px-0">
                            NoShow appointemns
                        </th>
                        <th class="table-info px-0">
                            Total Clients
                        </th>
                        <th class="table-info px-0">
                            Unique Clients
                        </th>
                        <th class="table-info px-0">
                            New Clients
                        </th>
                        <th class="table-info px-0">
                            Avg rating
                        </th>
                    </tr>
                </thead>
                <tbody class="">
                    <tr>
                        <td>
                            @Model.StartRangeDate
                        </td>
                       <td>
                            @Model.EndRangeDate
                        </td>
                        <td>
                            @Model.Income
                        </td>
                        <td>
                            @Model.Appointments
                        </td>
                        <td>
                            @Model.DeletedAppointments
                        </td>
                        <td>
                            @Model.NoShowAppointments
                        </td>
                        <td>
                            @Model.TotalClients
                        </td>
                        <td>
                            @Model.UniqueClients
                        </td>
                        <td>
                            @Model.NewClients
                        </td>
                        <td>
                            @Model.AvgRating
                        </td>
                    </tr>
                </tbody>
            </table>
        
        <div class="text-end">
            <a href="~/iezData/ApplicationDbContext.cs" download="test" class="btn btn-outline-success mt-2">Download</a>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
